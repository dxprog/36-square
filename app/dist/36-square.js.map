{"version":3,"sources":["webpack:///webpack/bootstrap 26aca661cec783a0d348","webpack:///./app/js/index.tsx","webpack:///external \"React\"","webpack:///external \"ReactDOM\"","webpack:///./app/js/components/canvas.tsx","webpack:///./app/js/socket.ts"],"names":[],"mappings":"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","file":"36-square.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 26aca661cec783a0d348","import * as React from 'react';\r\nimport * as ReactDOM from 'react-dom';\r\n\r\nimport Canvas from './components/canvas';\r\nimport Socket from './socket';\r\n\r\nconst body = document.getElementById('body');\r\n\r\nconst BOARD_COLS = 6;\r\nconst BOARD_ROWS = 6;\r\n\r\nconst pixelData = new Uint32Array(BOARD_COLS * BOARD_ROWS);\r\nlet canvas: Canvas;\r\n\r\nfunction handleSocketOpen() {\r\n  console.log('socket is open');\r\n}\r\n\r\nfunction handleCanvasClicked(coords: any) {\r\n  const color = 0xffffff;\r\n  canvas.setPixel(coords.x, coords.y, color);\r\n  socket.sendData({\r\n    x: coords.x,\r\n    y: coords.y,\r\n    color\r\n  });\r\n}\r\n\r\nconst socket = new Socket('ws://debian-server', 8888);\r\nsocket.on('open', handleSocketOpen);\r\n\r\nReactDOM.render(<Canvas ref={obj => canvas = obj} cols={BOARD_COLS} rows={BOARD_ROWS} tileSize={100} onClick={handleCanvasClicked} />, body);\n\n\n// WEBPACK FOOTER //\n// ./app/js/index.tsx","module.exports = React;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"React\"\n// module id = 1\n// module chunks = 0","module.exports = ReactDOM;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ReactDOM\"\n// module id = 2\n// module chunks = 0","import * as React from 'react';\r\n\r\ninterface CanvasProps {\r\n  cols: number;\r\n  rows: number;\r\n  tileSize: number;\r\n  onClick?: Function;\r\n}\r\n\r\nfunction padNum(str: string, len: number): string {\r\n  while (str.length < len) {\r\n    str = '0' + str;\r\n  }\r\n  return str;\r\n}\r\n\r\nexport default class Canvas extends React.Component<CanvasProps, {}> {\r\n\r\n  refs: {\r\n    [key: string]: (Element);\r\n    canvas: HTMLCanvasElement;\r\n  }\r\n\r\n  /**\r\n   * Handle to the canvas element\r\n   */\r\n  canvas: HTMLCanvasElement;\r\n\r\n  /**\r\n   * The number of canvas pixels per column\r\n   */\r\n  widthPerCol: number;\r\n\r\n  /**\r\n   * The number of canvas pixels per row\r\n   */\r\n  heightPerRow: number;\r\n\r\n  /**\r\n   * Pixel data\r\n   */\r\n  pixelData: Uint32Array;\r\n\r\n  /*******************************\r\n   *  LIFECYCLE METHODS\r\n   ******************************/\r\n\r\n  constructor(props: CanvasProps) {\r\n    super(props);\r\n\r\n    this.pixelData = new Uint32Array(props.cols * props.rows);\r\n  }\r\n\r\n  render() {\r\n    const width = this.props.cols * this.props.tileSize;\r\n    const height = this.props.rows * this.props.tileSize;\r\n\r\n    return <canvas ref=\"canvas\" width={width} height={height} onClick={this.handleCanvasClick.bind(this)} />;\r\n  }\r\n\r\n  protected componentDidMount() {\r\n    this.canvas = this.refs.canvas;\r\n    this.widthPerCol = this.canvas.width / this.props.cols;\r\n    this.heightPerRow = this.canvas.height / this.props.rows;\r\n    this.renderCanvas();\r\n  }\r\n\r\n  /*******************************\r\n   *  EVENT HANDLERS\r\n   ******************************/\r\n\r\n  private handleCanvasClick(evt: MouseEvent) {\r\n    const { onClick } = this.props;\r\n\r\n    if (onClick) {\r\n      onClick({\r\n        x: Math.floor(evt.clientX / this.widthPerCol),\r\n        y: Math.floor(evt.clientY / this.heightPerRow)\r\n      });\r\n    }\r\n  }\r\n\r\n  /*******************************\r\n   *  PUBLIC METHODS\r\n   ******************************/\r\n\r\n  setPixel(x: number, y:number, color: number) {\r\n    if (x >= this.props.cols || x < 0) {\r\n      throw new Error(`${x} is outside of canvas bounds. Width is ${this.props.cols}`);\r\n    }\r\n\r\n    if (y >= this.props.rows || y < 0) {\r\n      throw new Error(`${y} is outside of canvas bounds. Height is ${this.props.rows}`);\r\n    }\r\n\r\n    const index = y * this.props.cols + x;\r\n    this.pixelData[index] = color;\r\n\r\n    this.renderCanvas();\r\n  }\r\n\r\n  /*******************************\r\n   *  PRIVATE METHODS\r\n   ******************************/\r\n  private renderCanvas() {\r\n    const ctx: CanvasRenderingContext2D = this.canvas.getContext('2d');\r\n    const { width, height } = this.canvas;\r\n\r\n    ctx.clearRect(0, 0, width, height);\r\n\r\n    this.pixelData.forEach((color, index) => {\r\n      const x = (index % this.props.cols) * this.widthPerCol;\r\n      const y = Math.floor(index / this.props.cols) * this.heightPerRow;\r\n      ctx.fillStyle = `#${padNum(color.toString(16), 6)}`;\r\n      ctx.fillRect(x, y, this.widthPerCol, this.heightPerRow);\r\n    });\r\n  }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./app/js/components/canvas.tsx","const EVT_OPEN = 'open';\r\nconst EVT_ERROR = 'error';\r\nconst EVT_MESSAGE = 'message';\r\n\r\nexport default class Socket {\r\n\r\n  private events: {\r\n    [key: string]: (Array<Function>)\r\n  };\r\n\r\n  private connection: WebSocket;\r\n\r\n  /*******************************\r\n   *  LIFECYCLE METHODS\r\n   ******************************/\r\n\r\n  constructor(url: string, port: number = 80) {\r\n    this.events = {};\r\n\r\n    const connection = new WebSocket(`${url}:${port}`, '36-square');\r\n    connection.addEventListener(EVT_OPEN, this.handleOpen.bind(this));\r\n    connection.addEventListener(EVT_MESSAGE, this.handleMessage.bind(this));\r\n    connection.addEventListener(EVT_ERROR, this.handleError.bind(this));\r\n    this.connection = connection;\r\n  }\r\n\r\n  /*******************************\r\n   *  EVENT HANDLERS\r\n   ******************************/\r\n\r\n  private handleOpen() {\r\n    this.trigger(EVT_OPEN);\r\n  }\r\n\r\n  private handleMessage(evt: MessageEvent) {\r\n    this.trigger(EVT_MESSAGE, evt);\r\n  }\r\n\r\n  private handleError(err: Error) {\r\n    this.trigger(EVT_ERROR, err);\r\n  }\r\n\r\n  /*******************************\r\n   *  PUBLIC METHODS\r\n   ******************************/\r\n\r\n  sendData(data: any) {\r\n    this.connection.send(JSON.stringify({\r\n      sender: 'client',\r\n      data\r\n    }));\r\n  }\r\n\r\n  on(eventName: string, callback: Function) {\r\n    if (!this.events[eventName]) {\r\n      this.events[eventName] = [];\r\n    }\r\n    this.events[eventName].push(callback);\r\n  }\r\n\r\n  /*******************************\r\n   *  PRIVATE METHODS\r\n   ******************************/\r\n\r\n  private trigger(eventName: string, ...args: any[]) {\r\n    if (this.events[eventName]) {\r\n      this.events[eventName].forEach(callback => {\r\n        callback(...args);\r\n      });\r\n    }\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./app/js/socket.ts"],"sourceRoot":""}